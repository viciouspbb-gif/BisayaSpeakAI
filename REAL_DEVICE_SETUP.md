# 実機でのテスト手順

## ✅ 完了したこと
- PCのIPアドレス確認: **192.168.0.5**
- `RetrofitClient.kt` の修正完了

---

## 📱 実機セットアップ手順

### ステップ1: スマホの開発者オプションを有効化

#### 1-1. 設定アプリを開く

#### 1-2. 「デバイス情報」または「端末情報」を開く
```
設定 → システム → デバイス情報
または
設定 → 端末情報
```

#### 1-3. 「ビルド番号」を7回連続タップ
```
「ビルド番号」または「Build Number」を見つける
7回タップ → 「開発者になりました！」と表示される
```

#### 1-4. USBデバッグを有効化
```
設定 → システム → 開発者向けオプション
または
設定 → 開発者向けオプション

「USBデバッグ」をONにする
```

---

### ステップ2: PCとスマホを接続

#### 2-1. USBケーブルで接続
- スマホとPCをUSBケーブルで接続

#### 2-2. スマホで許可
```
「USBデバッグを許可しますか？」
→ 「許可」または「OK」をタップ

「常に許可する」にチェックを入れると便利
```

#### 2-3. 接続確認（PowerShell）
```powershell
adb devices
```

**期待される出力:**
```
List of devices attached
XXXXXXXXXX      device
```

デバイスが表示されればOK！

---

### ステップ3: Android Studioでビルド＆実行

#### 3-1. Gradle Sync
```
Android Studio下部のステータスバーで
"Gradle sync finished" を確認
```

#### 3-2. デバイス選択
```
上部ツールバーのデバイスドロップダウンに
あなたのスマホの名前が表示されているはず
```

#### 3-3. ビルド＆実行
```
Shift + F10
または
Run → Run 'app'
または
緑の三角（▶）ボタンをクリック
```

#### 3-4. スマホでインストール許可
```
初回は「このアプリをインストールしますか？」
→ 「インストール」をタップ
```

---

## 🧪 テスト項目（サーバーなしでも確認可能）

### ✅ 確認できること
1. **アプリ起動**
   - レベル選択画面が表示される

2. **画面遷移**
   - 初級 → 練習画面
   - フレーズタップ → 録音画面

3. **バナー広告**
   - 練習画面下部に表示

4. **マイク権限**
   - 録音画面でマイク権限のダイアログ
   - 許可後、録音ボタンが有効化

5. **録音機能**
   - 録音ボタンをタップ
   - 赤い脈動アニメーション
   - 停止ボタンで録音停止

6. **インタースティシャル広告**
   - 「発音を診断」ボタンをタップ
   - 全画面広告が表示

### ❌ サーバーが必要な機能
- 発音診断（Pythonサーバー起動後にテスト）

---

## 🐛 トラブルシューティング

### スマホが認識されない

#### 原因1: USBデバッグが無効
```
スマホの設定 → 開発者向けオプション
「USBデバッグ」がONになっているか確認
```

#### 原因2: USBドライバー未インストール
```powershell
# ADBサーバーを再起動
adb kill-server
adb start-server
adb devices
```

#### 原因3: USBケーブルの問題
```
- データ転送対応のUSBケーブルを使用
- 充電専用ケーブルでは認識されない
- 別のUSBポートを試す
```

### インストールエラー

#### エラー: "Installation failed"
```
1. スマホの空き容量を確認（最低500MB必要）
2. 既存のアプリをアンインストール
3. 再度インストール
```

### アプリがクラッシュする

#### Logcatで確認
```
Android Studio下部:
Logcat タブ（Alt + 6）
エラーメッセージを確認
```

### 広告が表示されない

#### 確認事項
```
1. スマホがWi-Fiに接続されているか
2. インターネット接続が正常か
3. Logcatで広告関連のエラーを確認
```

---

## 📝 次のステップ

### 今回（サーバーなし）
```
✅ アプリのビルド
✅ 実機へのインストール
✅ 基本機能の動作確認
✅ UI/UXの確認
✅ 広告表示の確認
```

### 次回（サーバーあり）
```
⏳ Pythonサーバーのセットアップ
⏳ 発音診断機能のテスト
⏳ スコア表示の確認
⏳ フィードバック表示の確認
```

---

## 🎯 現在の設定

### PCのIPアドレス
```
192.168.0.5
```

### サーバーURL（コード内）
```kotlin
private const val BASE_URL = "http://192.168.0.5:8000/"
```

### 注意事項
```
⚠️ PCとスマホが同じWi-Fiネットワークに接続されている必要があります
⚠️ Pythonサーバー起動時は、ファイアウォールで8000番ポートを許可してください
```

---

## ✅ チェックリスト

### 実機セットアップ
- [ ] 開発者オプションを有効化
- [ ] USBデバッグをON
- [ ] PCとUSB接続
- [ ] USBデバッグを許可
- [ ] `adb devices` で認識確認

### Android Studio
- [ ] Gradle Sync完了
- [ ] デバイスが選択されている
- [ ] ビルド成功
- [ ] アプリがインストールされた

### アプリ動作
- [ ] アプリが起動した
- [ ] レベル選択画面が表示
- [ ] 練習画面に遷移
- [ ] バナー広告が表示
- [ ] 録音画面に遷移
- [ ] マイク権限を許可
- [ ] 録音ができた

---

**準備完了！Android Studioで Run を実行してください！** 🚀
